<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="goBackHome()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-center">Añadir Nueva Tarea</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding0">
  <form [formGroup]="tareaForm" (ngSubmit)="onSubmit()">
    <ion-card>
      <ion-card-header>
        <ion-card-title class="ion-text-center">Nueva Tarea</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <!-- Campo para Descripción -->
        <ion-item lines="full" class="input-field margin-4">
          <ion-label position="stacked">Descripción</ion-label>
          <ion-input formControlName="description" type="text" placeholder="Escribe la tarea..." clearInput></ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="tareaForm.get('description')?.invalid && tareaForm.get('description')?.touched">
          La descripción es requerida (mín. 5 caracteres).
        </ion-note>

        <!-- Campo para Fecha Límite -->
        <ion-item lines="full" class="input-field margin-4">
          <ion-label position="stacked">Fecha Límite</ion-label>
          <ion-datetime formControlName="limitDate" display-format="DD/MM/YYYY" placeholder="Selecciona una fecha"></ion-datetime>
        </ion-item>
        <ion-note color="danger" *ngIf="tareaForm.get('limitDate')?.invalid && tareaForm.get('limitDate')?.touched">
          Selecciona una fecha.
        </ion-note>

        <!-- Campo para Seleccionar Usuario -->
        <ion-item lines="full" class="input-field margin-4">
          <ion-label position="stacked">Usuario Asignado</ion-label>
          <ion-select formControlName="userId" placeholder="Selecciona un usuario">
            <ion-select-option *ngFor="let usuario of usuarios" [value]="usuario.id">{{ usuario.name }}</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-note color="danger" *ngIf="tareaForm.get('userId')?.invalid && tareaForm.get('userId')?.touched">
          Selecciona un usuario.
        </ion-note>

        <!-- Botón de Enviar -->
        <ion-button expand="block" color="primary" type="submit" [disabled]="tareaForm.invalid" class="submit-button">
          <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
          Crear Tarea
        </ion-button>

        <!-- Botón para volver a Home -->
        <ion-button expand="block" color="secondary" (click)="goBackHome()" class="back-button">
          <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
          Volver a Home
        </ion-button>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>
