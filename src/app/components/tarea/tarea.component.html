<ion-header>
  <ion-toolbar class="custom-toolbar">
    <ion-buttons slot="start">
      <ion-button (click)="goBackHome()" class="back-button-header">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-center">Lan bat aldau</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="form-container">
    <div class="form-box">
      <h1>Lana aldau</h1>
      
      <form [formGroup]="tareaForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <ion-item lines="none">
            <ion-select formControlName="description" 
                      interface="popover" 
                      placeholder="Iteko"
                      class="custom-select">
                      <ion-select-option value="Ontziyek garbitu">Ontziyek garbitu</ion-select-option>
                      <ion-select-option value="Ontziyek jaso">Ontziyek jaso</ion-select-option>
                      <ion-select-option value="Erropak ixigi">Erropak ixigi</ion-select-option>
                      <ion-select-option value="Erropak jaso">Erropak jaso</ion-select-option>
                      <ion-select-option value="Bitrue garbitu">Bitrue garbitu</ion-select-option>
                      <ion-select-option value="Kumunzulue garbitu">Kumunzulue garbitu</ion-select-option>
                      <ion-select-option value="Kumuneko ispilue garbiu">Kumuneko ispilue garbiu</ion-select-option>
                      <ion-select-option value="Erretza etxe osun">Erretza etxe osun</ion-select-option>
                      <ion-select-option value="Erretza kumun + sukalde">Erretza kumun + sukalde</ion-select-option>
                      <ion-select-option value="Erropa txikiyek ixigi">Erropa txikiyek ixigi</ion-select-option>
                      <ion-select-option value="Erropa haundiyek ixigi">Erropa haundiyek ixigi</ion-select-option>
                      <ion-select-option value="Txabolan lanak">Txabolan lanak</ion-select-option>
                      <ion-select-option value="Txakurrei jana eman">Txakurrei jana eman</ion-select-option>
                      <ion-select-option value="Lorak ureztau">Lorak ureztau</ion-select-option>
                      <ion-select-option value="Lorak garbiu">Lorak garbiu</ion-select-option>
                      <ion-select-option value="Kafie iñ">Kafie iñ</ion-select-option>
                      <ion-select-option value="Bazkaye/afaye iñ">Bazkaye/afaye iñ</ion-select-option>
                      <ion-select-option value="5ok gaudenin mahai osue jaso">5ok gaudenin mahai osue jaso</ion-select-option>
                      <ion-select-option value="Konprak iñ">Konprak iñ</ion-select-option>
                      <ion-select-option value="Ogiye erosi">Ogiye erosi</ion-select-option>
                      <ion-select-option value="Basurie jeitsi">Basurie jeitsi</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-note color="danger" *ngIf="tareaForm.get('description')?.invalid && tareaForm.get('description')?.touched">
            Aukerau lan bat
          </ion-note>
        </div>

        <div class="form-group">
          <ion-item lines="none" class="date-item">
            <ion-label style="color: white">Noizko inber da?</ion-label>
            <ion-button (click)="toggleCalendar()" fill="solid" class="date-button">
              Aukerau egune
            </ion-button>
          </ion-item>
          
          <ion-item *ngIf="showCalendar" lines="none">
            <ion-datetime 
              formControlName="limitDate" 
              display-format="DD/MM/YYYY HH:mm"  
              placeholder="Selecciona fecha y hora" 
              presentation="date-time" 
              cancel-text="Cancelar"
              done-text="Aceptar"
              class="custom-datetime">
            </ion-datetime>
          </ion-item>
          <ion-note color="danger" *ngIf="tareaForm.get('limitDate')?.invalid && tareaForm.get('limitDate')?.touched">
            Aukerau data bat
          </ion-note>
        </div>

        <div class="form-group">
          <ion-item lines="none">
            <ion-select formControlName="userId" 
                      interface="popover" 
                      placeholder="Zeñek"
                      class="custom-select">
              <ion-select-option *ngFor="let usuario of usuarios" [value]="usuario.id">
                {{ usuario.name }}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </div>

        <div class="form-group">
          <ion-item lines="none">
            <ion-select formControlName="status" 
                      interface="popover" 
                      placeholder="Bukauta?"
                      class="custom-select">
              <ion-select-option [value]="true">Bukauta</ion-select-option>
              <ion-select-option [value]="false">Iteko</ion-select-option>
            </ion-select>
          </ion-item>
        </div>

        <ion-button expand="block" 
                    type="submit" 
                    class="submit-button"
                    [disabled]="tareaForm.invalid || gordetzen"
                    shape="round">
          <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
          Gorde lana
        </ion-button>

        <ion-button expand="block" 
                    class="back-button"
                    (click)="goBackHome()"
                    shape="round">
          <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
          Atzea
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>